import { TetrominoType } from "./tetrominos"

export type TetrominoOrientation = '0' | 'R' | '2' | 'L'

export const ROTATION_SEQUENCE: TetrominoOrientation[] = ['0', 'R', '2', 'L']

type WallKickTable = {
    [T in TetrominoType]: {[K: string]: [number, number][]}
}

const TABLE_1: {[K: string]: [number, number][]} = {
    '0R': [[0, 0], [-1, 0], [-1, +1], [0, -2], [-1, -2]],
    'R0': [[0, 0], [+1, 0], [+1, -1], [0, +2], [+1, +2]],
    'R2': [[0, 0], [+1, 0], [+1, -1], [0, +2], [+1, +2]],
    '2R': [[0, 0], [-1, 0], [-1, +1], [0, -2], [-1, -2]],
    '2L': [[0, 0], [+1, 0], [+1, +1], [0, -2], [+1, -2]],
    'L2': [[0, 0], [-1, 0], [-1, -1], [0, +2], [-1, +2]],
    'L0': [[0, 0], [-1, 0], [-1, -1], [0, +2], [-1, +2]],
    '0L': [[0, 0], [+1, 0], [+1, +1], [0, -2], [+1, -2]],
}

const TABLE_2: {[K: string]: [number, number][]} = {
    '0R': [[0, 0], [-2, 0], [+1, 0], [-2, -1], [+1, +2]],
    'R0': [[0, 0], [+2, 0], [-1, 0], [+2, +1], [-1, -2]],
    'R2': [[0, 0], [-1, 0], [+2, 0], [-1, +2], [+2, -1]],
    '2R': [[0, 0], [+1, 0], [-2, 0], [+1, -2], [-2, +1]],
    '2L': [[0, 0], [+2, 0], [-1, 0], [+2, +1], [-1, -2]],
    'L2': [[0, 0], [-2, 0], [+1, 0], [-2, -1], [+1, +2]],
    'L0': [[0, 0], [+1, 0], [-2, 0], [+1, -2], [-2, +1]],
    '0L': [[0, 0], [-1, 0], [+2, 0], [-1, +2], [+2, -1]],
}

export const WALL_KICK_TABLE: WallKickTable = {
    'I': TABLE_2,
    'O': TABLE_1,
    'T': TABLE_1,
    'S': TABLE_1,
    'Z': TABLE_1,
    'J': TABLE_1,
    'L': TABLE_1,
}